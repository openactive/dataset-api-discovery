<!DOCTYPE html>
<html xmlns='https://www.w3.org/1999/xhtml' lang='en'>

<head>
    <meta charset='utf-8' />
    <title>Dataset API Discovery 0.1</title>

    <script type="text/javascript" class='remove'>
        var respecConfig = {
            // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
            specStatus: "CG-DRAFT",

            // the specification's short name, as in https://www.w3.org/TR/short-name/
            shortName: "dataset-api-discovery",

            // if you wish the publication date to be other than today, set this
            // publishDate:  "2009-08-06",

            // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
            // and its maturity status
            // previousPublishDate:  "1977-03-15",
            //previousMaturity: "ED",
            //previousPublishDate: "2018-05-03",

            // if there a publicly available Editor's Draft, this is the link
            edDraftURI: "https://openactive.io/dataset-api-discovery/EditorsDraft/",
            //prevED:  "https://openactive.io/spec-template/",
            //previousURI:  "https://openactive.io/realtime-paged-data-exchange/0.2.3/",
            //testSuiteURI: "https://openactive.io/endpoint-validator/",
            copyrightStart: 2019,

            // editors, add as many as you like
            // only "name" is REQUIRED
            editors: [{
                name: "Leigh Dodds",
                url: "https://ldodds.com",
                company: "Open Data Institute",
                companyURL: "https://theodi.org",
                w3cid: 55359
            }, {
                name: "Nick Evans",
                url: "https://nickevans.me/",
                company: "Open Data Institute",
                companyURL: "https://theodi.org"
            },
            {
                name: "Timothy Hill",
                company: "Open Data Institute",
                companyURL: "https://theodi.org",
            }],

            otherLinks: [{
                key: "Version",
                value: "0.1",
                href: "https://github.com/openactive/dataset-api-discovery/issues/"
            }],

            logos: [{
                src: 'https://www.openactive.io/assets/openactive-logo-large.png',
                href: "https://www.openactive.io",
                alt: "openactive.io",
                width: 255, //170
                height: 43, //22
                id: 'logo'
            }],

            // name of the WG
            wg: "OpenActive Community Group",

            // URI of the public WG page
            wgURI: "https://www.w3.org/community/openactive/",

            // name (with the @w3c.org) of the public mailing to which comments are due
            wgPublicList: "public-openactive",

            maxTocLevel: 4,
            preProcess: [],
            //noRecTrack: true,
            isRecTrack:   true,
            isNoTrack:    true,
            github: "https://github.com/openactive/dataset-api-discovery/",
            format: "markdown",
            localBiblio: {
                "JSON-LD": {
                    "href": "https://www.w3.org/TR/json-ld/",
                    "title": "JSON-LD 1.0",
                    "status": "REC",
                    "publisher": "W3C",
                },
                "SCHEMA-ORG": {
                    "href": "https://schema.org/",
                    "title": "Schema.org"

                },
                "Modelling-Opportunity-Data": {
                    "href": "https://openactive.io/modelling-opportunity-data/",
                    "title": "Modelling Opportunity Data",
                    "publisher": "OpenActive Community Group",
                },
                "RPDE": {
                    "href": "https://openactive.io/realtime-paged-data-exchange/",
                    "title": "Realtime Paged Data Exchange",
                    "publisher": "OpenActive Community Group",
                },
                "OpenActive-Vocabulary": {
                    "href": "https://openactive.io/ns/",
                    "title": "OpenActive Vocabulary",
                    "publisher": "OpenActive Community Group",
                },
                "OAuth2" : {
                    "href": "https://oauth.net/2/",
                    "title": "OAuth 2.0",
                },
                "OpenIdConnect" : {
                    "href": "https://openid.net/connect/",
                    "title": "OpenID Connect",
                }
            }
        };
    </script>

    <script src='examples.js' class='remove'></script>

    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>

    <style>
        table {
            border-collapse: collapse;
            border: 1px solid #bec9d9
        }

        td,
        th {
            padding: 3px 0.5em;
            border-left: 1px solid black;
            border-right: 1px solid black;
            border-bottom: 1px solid #E2EDFE;
        }

        tr th[colspan] {
            color: #005A9C;
            background-color: #FEEDE2;
            text-align: center
        }

        th {
            color: #005A9C;
            background-color: #E2EDFE;
            font-weight: normal;
            border-bottom: 1px solid #BEC9D9;
        }

        tbody tr th {
            text-align: left;
        }

        td.nb {
            font-size: smaller;
        }

        .rec,
        .pr {
            color: #005A9C;
            background-color: #99EE99
        }

        .ext {
            background-color: #FFFFFF
        }

        .cr,
        .lcwd {
            color: #005A9C;
            background-color: #EEEE99
        }

        .wd {
            color: #005A9C;
            background-color: #EE9999
        }

        .ed,
        .fpwd {
            color: #005A9C;
            background-color: #FF7777
        }

        code {
            white-space: pre;
        }

        html {
            background-image: none !important;
        }

        body {
            background: white top left fixed no-repeat !important;
            background-size: 25px auto !important;
            background-image:
                url('https://www.openactive.io/assets/openactive-label-specification.png') !important;
        }

        h1 {
            font-family: 'Open Sans', sans-serif !important;
            font-weight: 300 !important;
            color: #3B3089 !important;
            font-size: 220%;
        }

        #toc {
            padding-top: 0px !important;
        }

        .remove {
            background-color: yellow;
        }

        code {
            color: #C83500;
        }

        em.rfc2119 {
          text-transform:     lowercase;
          font-variant:       small-caps;
          font-style:         normal;
          color:              #900;
        }

        a.internalDFN[href] {
          color: #000;
          font-weight: 500;
        }
    </style>

</head>

<body>
<style>
    body {
        background-size: 25px auto !important;
    }

    body.toc-sidebar #toc {
        background-size: 25px auto !important;
        background-attachment: fixed !important;
    }
</style>
<section id='abstract'>
This document specifies a dataset site and embedded JSON-LD document that together describe
an open data dataset and define related APIs that are available to manipulate it.
</section>

<section id='sotd'>
Contributions to this document are not only welcomed but are actively solicited
and should be made via
[GitHub Issues](https://github.com/openactive/dataset-api-discovery/issues) and
pull requests. The source code is available
on [GitHub](https://github.com/openactive/dataset-api-discovery).

<div class="note">
  This document represents an early Editors Draft of the planned API design. It is
  likely to change between now and its final version. These
  early drafts are intended to help developers provide that feedback by developing
  proof-of-concept implementations. We encourage developers to explore this API and
  contribute to the development of the specification.
</div>

</section>

<section class="informative">

# Introduction

The document is an output of the
[OpenActive Community Group](https://www.w3.org/community/openactive/). As part
of the [OpenActive](https://openactive.io) initiative, the community group is
developing standards that will promote the publication and use of open
[opportunity data](https://openactive.io/modelling-opportunity-data/#categories-of-physical-activity-data)
in helping people to become more physically active.

This specification aims to build on existing work by the [WebAPI Discovery Community Group](https://www.w3.org/community/web-api-discovery/), the W3C's [DCAT standard](https://www.w3.org/TR/vocab-dcat-2/), and the [Schema.org discussion](https://github.com/schemaorg/schemaorg/issues/1423), providing a profile and guidance specifically both for open data publishers and implementers of Web APIs that manipulate openly available datasets. It also aims to provide conformance rules to ensure that implementers include the details necessary to allow a <a>Data Consumer</a> to reliably integrate with standards-compliant services without human intervention.

The specification defines both the requirements of a <a>Dataset Site</a> provided by a <a>Data Publisher</a> (server) for use by a <a>Data Consumer</a> (client), and of any <a>Data Catalog</a> designed to enable discovery of such sites. In addition, it includes high level requirements for human-readable content, and detailed requirements and conformance rules for machine-readable content.

## Scope and requirements

<a>Dataset Sites</a> that conform to this specification will be:
- __Schema.org compatible__ - Remain fully compatible with schema.org, and machine-readable by <a>Data Consumers</a> that can read [Schema.org Dataset](https://schema.org/Dataset) and future [Schema.org WebAPI](https://schema.org/WebAPI) embedded JSON-LD.
- __DCAT compatible__ - By ensuring that as much of the schema.org markup as possible conforms to the DCAT group's [recommended mappings](https://www.w3.org/TR/vocab-dcat-2/#dcat-sdo) between schema.org and DCAT version 2 .
- __Google compatible__ - Use embedded JSON-LD to enable indexing by [Google Dataset Search](https://developers.google.com/search/docs/data-types/dataset), and any [future Google `WebAPI` Search](https://blog.apis.guru/api-discovery-can-we-do-better-2336706d5407).
- __Sufficient for automated integration__ - Allow <a>Data Consumer</a>s to reliably integrate with services that are compliant with a standardised [API specification](https://nordicapis.com/difference-api-documentation-specification-definition/) (e.g. a Swagger specification) without requiring additional configuration or human intervention.
- __Human readable__ - Include human-readable content to allow developers to successfully integrate discover, consume and integrate with the <a>Data Publisher's</a> dataset and API.
- __Interactive__ - Include a mechanism for <a>Data Consumers</a> to provide feedback to <a>Data Publishers</a> in the open, and subscribe to updates from <a>Data Publishers</a>.

<a>Dataset Sites</a> will also provide the following information about the implementation of APIs it describes:
- A route to gain access to the Web API described, e.g a website with a sign-up form.
- The specific version of any specification to which the Web API conforms (e.g. the [Open Booking API](https://www.openactive.io/open-booking-api/))
- The specific defined profiles of any specification that are supported, both for any Web APIs defined, but also for any open datasets.
- Where conformance is verified via third-party or self-certification, a statement of the level of conformance, and reference to evidence of this.

<a>Data Catalogs</a> published in accordance with this standard will

- __Schema.org compatible__ - Remain fully compatible with schema.org, and machine-readable by <a>Data Consumers</a> that can read [Schema.org Dataset](https://schema.org/Dataset) and future [Schema.org WebAPI](https://schema.org/WebAPI) embedded JSON-LD.
- __DCAT compatible__ - By ensuring that as much of the schema.org markup as possible conforms to the DCAT group's [recommended mappings](https://www.w3.org/TR/vocab-dcat-2/#dcat-sdo) between schema.org and DCAT version 2 .
- __Sufficient for automated integration__ - Allow <a>Data Consumer</a>s to reliably integrate with services that are compliant with a standardised [API specification](https://nordicapis.com/difference-api-documentation-specification-definition/) (e.g. a Swagger specification) without requiring additional configuration or human intervention.-

Note that although this specification of the [OpenActive Community Group](https://www.w3.org/community/openactive/), it is designed to apply to any open dataset where an API is available to manipulate it.

### Functionality that is out of scope

By design this specification will not define some types of functionality.

These have been declared as permanently out of scope because they are
adequately covered by existing specifications:

* __API documentation__ - each system should provide its own documentation, the specification only requires that such documentation exist.
* __API specification and API definition__ - many existing formats are available for API specification (e.g. Swagger, RAML, etc.).

## Audience

The document is primarily intended for the following audiences:

- Software developers who want to publish a <a>Dataset Site</a> ("<a>Data Publishers</a>").
- Software developers building client libraries or tools.
- Software developers writing applications that will use <a>Dataset Sites</a> ("<a>Data Consumers</a>").

</section>

<section id="conformance">

This specification makes use of the compact IRI Syntax; please refer to the
[Compact IRIs](https://www.w3.org/TR/json-ld/#compact-iris) from [[JSON-LD]].

</section>

<section>

# Typographical Conventions

The following typographic conventions are used in this specification:

<dl class="typography">
    <dt><code>markup</code></dt>
    <dd>Markup (elements, attributes, properties), machine processable
        values (string, characters, media types), property name, or a
        file name is in a monospace font.</dd>
    <dt><a href="#" class="internalDFN">Definition</a></strong></dt>
    <dd>A definition of a term, to be used elsewhere in this or other
        specifications, is underlined and in black.</dd>
    <dt><a href="">hyperlink</a></dt>
    <dd>A hyperlink is underlined and in blue.</dd>
    <dt>&#x5B;<a href="">reference</a>&#x5D;</dt>
    <dd>A document reference (normative or informative) is enclosed in
        square brackets and links to the references section.</dd>
</dl>

<div class="note">
Notes are in light green boxes with a green left border and with a "Note"
header in green. Notes are normative or informative depending on the whether
they are in a normative or informative section, respectively.

</div>
<pre class="example">
Examples are in light khaki boxes, with khaki left border, and with a
numbered "Example" header in khaki. Examples are always informative.
The content of the example is in monospace font and may be syntax colored.
</pre>

</section>

<section>

# Key Actors

<dl class="typography">
    <dt><dfn data-lt="Data Publisher's">Data Publisher</dfn></dt>
    <dd>The application that is publishing the <a>Dataset Site</a>, that will also be making available open data endpoints and API endpoints for use by the <a>Data Consumer</a>.</dd>
    <dt><dfn>Data Consumer</dfn></dt>
    <dd>The application or human that is reading the <a>Dataset Site</a> in order  to make use of the available open data endpoints and API endpoints.</dd>
</dl>

</section>

<section class="normative">

# Dataset Site

## Definition

A <dfn>Dataset Site</dfn> is a human and machine readable web page ("<dfn>Dataset Page</dfn>") that describes a dataset and the APIs available to interact with it, with associated functionality that allows for feedback to be provided about the dataset.

## Purpose

The purpose of a <a>Dataset Site</a> is to provide:

* A web page that can be referenced when discussing the dataset.
* A human and machine readable licence associated with the data (the <a>Dataset Page</a> contains invisible metadata which allows its details to be read automatically).
* A human and machine readable rights statement to specify how dataset users (innovators who want to build on top of/use data) should attribute your data.
* An accessible "single point of truth" that explains where the data can be found.
* Details ("documentation") and historical record ("changelog") relating to the format of the data, including the specifications it follows, and the data fields it contains.
* A place where the community can contribute with comments, and raise issues.
* A mechanism by which <a>Data Consumers</a> can subscribe to get updates about changes to the data format, specifications and fields.
* A human and machine readable description of any APIs that can be used to manipulate the data, and the process to gain access to such APIs.


## Human-readable Dataset Page

All attributes here are RECOMMENDED.

|CSS Selector|Attribute|Value|Notes|
|-------------|---------|-----|-----|
|`head/title`|`content`|[publisher name] Open Data||
|`head/meta[name='title']`|`content`|[publisher name] Open Data||
|`head/meta[name='identifier']`|`content`|URL of the dataset site||
|`head/meta[name='description']`|`content`|Description of the site and its datasets||
|`body/div#wrapper`|`typeof`|`dcat:Dataset`||
|`body/div#wrapper`|`resource`|URL of the dataset site||
|`body/section[#main]/header/div/a`|`property`|`foaf:homepage`||
|`body/section[#main]/header/div/a`|`href`|URL of the publisher's homepage||
|`body/section[#main]/header/div/a`|`about`|URL of the publisher's homepage||
|`body/section[#main]/header/div/a/span`|`foaf:name`|Publisher's name||
|`body/section[#main]/header/h2`|`property`|dct:title||
|`body/section[#main]/header/p.metadata[property='dct:created']`|`content`|dct:title|Date of site publication|
|`body/section[#main]/header/a.metadata[property='accrualPeriodicity']`|TEXT|Text|Frequency of update|
|`body/section[#main]/header/ul/li.fa-comments]`|`href`|URL|Link to discussion forum and other feedback provision|
|`body/section[#main]/header/ul/li.fa-info`|`href`|URL|Link to documentation|
|`body/section[#main]/header/ul.download/li/a[property='dcat:distribution'][typeof='dcat:Distribution']`|`href`|URL|Link to RPDE feed|
|`body/section[#main]/header/ul.download/li/a[property='dcat:distribution'][typeof='dcat:Distribution']/span[property='dct:title']`|`href`|Name of the dataset linked to||
|`body/section[#main]/header/ul.download/li/a[property='dcat:distribution'][typeof='dcat:Distribution']/span.metadata[property='dcat:mediaType']`|`content`|MIME type of the linked resource||
|`body/section[#main]/header/ul.download/li/a[property='dcat:distribution'][typeof='dcat:Distribution']/span.metadata[property='dcat:mediaType']`|TEXT|Declaration of RPDE and Opportunity specification conformance||
|`body/section[#main]/footer/div.license/span[property='dct:license']`|`resource`|URL of release license (for OpenActive, normally CC-BY c4.0)|
|`body/section[#main]/footer/div.license/span[property='dct:rights'][typeof='odrs:RightsStatement']`|CHILD|`<a href="[url]" property="odrs:attributionURL"><span property="odrs:attributionText">[publisher name]</span></a>`|

## Dataset Site Markup

|Property|Status|Type|Notes|
|--------|------|----|-----|
|@context|REQUIRED|Array of URL values|Will normally consist only of the value `http://schema.org/`|
|@type|REQUIRED|Text|`Dataset`|
|@id|RECOMMENDED|URL|A URL uniquely identifying the dataset site resource.|
|url|REQUIRED|URL|Typically the URL of the dataset site itself.|
|name|REQUIRED|Text|The name of the collection of datasets referenced by the site. Often this will simply be the name of the publishing organisation.|
|description|RECOMMENDED|Text|A human-readable description of the datasets referenced by the site.|
|keywords|OPTIONAL|Array of Text|Short descriptive metadata tags for the dataset collection.|
|license|REQUIRED |URL|A URL reference to the license under which the dataset site is published. For OpenActive dataset sites this should be `https://creativecommons.org/licenses/by/4.0/`.|
|distribution|REQUIRED|Array of `dcat:Distribution` object|See below, Describing Individual Feeds|
|discussionUrl|RECOMMENDED|URL|A link to a resource for discussing and raising issues with the published datasets. Typically, although not necessarily, this will be a link to a GitHub repository.|
|documentation|RECOMMENDED|Array of URL|Link(s) to further resources concerning the dataset site and its referenced datasets - e.g., GitHub READMEs or status summaries.|
|inLanguage|OPTIONAL|String|The language of the dataset. Should be expressed as an ISO 639-2 language code.|
|publisher|REQUIRED|schema:Organization|The organization responsible for publishing the collection of datasets linked to by the dataset site. For further information, see below, Describing Organizations.|
|datePublished|REQUIRED|schema:Date|The date the dataset site was published.|
|schemaVersion|REQUIRED|URL|The version of the dataset site specification to which the site conforms.|
|softwareVersion|RECOMMENDED|URL|A link to a repository holding the code by which the site was generated.|

### Describing Individual Feeds (`dcat:Distribution` objects)

|Property|Status|Type|Notes|
|--------|------|----|-----|
|@type|REQUIRED|Text|`DataDownload`|
|name|RECOMMENDED|Text|A human-readable name for the dataset.|
|additionalType|OPTIONAL|URL|A link to a definition of the type of the feed - e.g of `ScheduledSessions` or `CourseInstances`|
|encodingFormat|RECOMMENDED|Text or URL|The MIME-type of the data accessible via the `contentUrl`|
|contentUrl|REQUIRED|URL|The URL of the feed containing the dataset.|

### Supporting Booking (`schema:webAPI`)

In addition to the above markup for discoverability, dataset sites that support Open Booking API functionality MUST indicate this with markup enabling discovery and use of the relevant API endpoints.

|Property|Status|Type|Notes|
|--------|------|----|-----|
|@type|REQUIRED|Text|`WebAPI`|
|name|RECOMMENDED|Text|A human-readable name for the dataset.|
|description|OPTIONAL|Text|A human-readable description of the API|
|documentation|RECOMMENDED|schema:CreativeWork|Human-readable API documentation. See Describing API Endpoints, below.|
|termsOfService|REQUIRED|Text or URL|Human-readable terms of service documentation.|
|provider|REQUIRED|schema:Organization|The Organization providing the API endpoint.|
|endpointUrl|REQUIRED|URL|The root location or primary endpoint of the API.|
|conformsTo|RECOMMENDED|URL|The URL reference of an established standard to which the described API conforms.|
|version|RECOMMENDED|Text|The version of the URL.|
|license|REQUIRED |URL|A URL reference to the license under which the dataset site is published. For OpenActive dataset sites this should be `https://creativecommons.org/licenses/by/4.0/`.|
|endpointDescription|RECOMMENDED|schema:CreativeWork|A machine-readable description of the API. See Describing API Endpoints, below|

#### Describing API Endpoints (`schema:CreativeWork`)

Supporting documentation is crucial for the successful uptake and use of APIs. Ideally, both human-readable freetext and machine-readable structured data are made available.

The schema.org objects for human- and machine-readable documents are largely identical in terms of content and structure. However, the MIME-type associated with each will normally differ.

|Property|Status|Type|Notes|
|--------|------|----|-----|
|@type|REQUIRED|Text|`CreativeWork`|
|url|REQUIRED|URL|A URL pointing to supporting documentation for the API.|
|encodingFormat|RECOMMENDED|Text|The MIME-type delivered by the url. For human-readable documentation (`schema:documentation`) this will normally be `text/html`; for machine-readable documentation (`schema:endpointUrl`), `application/json` or a more-specific subtype of this.|
|documentation|RECOMMENDED|schema:CreativeWork|Human-readable API documentation. See Describing API Endpoints, below.|

<div class="note">
The `schema:WebAPI` specification has been assigned Pending status by the schema.org organisation, and is scheduled for release in schema version 10.0.  While `schema:WebAPI` is relatively stable, then, points of details are still subject to review and this specification may change at short notice.
</div>

<!--### JSON-LD

<pre class="example" title="Dataset Site JSON-LD Markup" data-transform="dataExampleDatasetEmbed">
</pre>

### DCAT

## API Documentation

### Open API
-->
## Discoverability and Dataset Sites (using `schema:DataCatalog`)

|Property|Status|Type|Notes|
|--------|------|----|-----|
|@context|REQUIRED|Array of URL values|Will normally consist only of the value `http://schema.org/`|
|@type|REQUIRED|String|`DataCatalog`|
|@id|RECOMMENDED|URL|A unique identifier for the DataCatalog, often identical to the URL at which the DataCatalog is found.|
|dataPublished|RECOMMENDED|`schema:Date`|The date the `DataCatalog` was published.|
|publisher|RECOMMENDED|`schema:Organization`|The `Organization` responsible for publishing the DataCatalog.|
|license|REQUIRED |URL|A URL reference to the license under which the dataset site is published. For OpenActive dataset sites this should be `https://creativecommons.org/licenses/by/4.0/`.|
|dataset|REQUIRED if `hasPart` is absent, OPTIONAL otherwise.|Array of URL|One or more URLs pointing to OpenActive Dataset Sites.|
|hasPart|REQUIRED if `dataset` is absent, OPTIONAL otherwise.|Array of URL|One or more URLs pointing to other OpenActive DataCatalogs.|

### Describing Publishers (`schema:Organization`)

|Property|Status|Type|Notes|
|--------|------|----|-----|
|@type|REQUIRED|Text|`Organization`|
|name|RECOMMENDED|Text|The name of the `Organization` publishing the datasets.|
|logo|OPTIONAL|URL|A link to the publishing `Organization`'s logo.|
|url|RECOMMENDED|URL|A link to the publishing `Organization`'s website.|


</section>


<section class="normative">

# Future versions of this API

Future iterations of the specification be shaped by the OpenActive community, and we encourage you to get involved.

</section>


<section class='appendix informative'>

# Acknowledgements

The editors thank [all members](https://www.w3.org/community/openactive/participants) of the OpenActive Community Group for their contributions.

</section>

</body>

</html>
